<% layout("./layouts/boilerplate") %>


<div class="col-6 offset-3">
    <h1 class="text-center">Leave a Review:</h1>
    <form action="/campgrounds/<%= campground.id %>/reviews" method="post" class="needs-validation" novalidate>
        <div class="my-3 row">
            <div class="d-flex flex-column ">
                <h3 class="align-self-center mt-5">How was your experience?</h3>
                <span class="star-cb-group align-self-center">
                    <input type="radio" id="rating-5" name="review[rating]" value="5" /><label for="rating-5">5</label>
                    <input type="radio" id="rating-4" name="review[rating]" value="4" checked="checked" /><label
                        for="rating-4">4</label>
                    <input type="radio" id="rating-3" name="review[rating]" value="3" /><label for="rating-3">3</label>
                    <input type="radio" id="rating-2" name="review[rating]" value="2" /><label for="rating-2">2</label>
                    <input type="radio" id="rating-1" name="review[rating]" value="1" /><label for="rating-1">1</label>
                    <input type="radio" id="rating-0" name="review[rating]" value="0" class="star-cb-clear" /><label
                        for="rating-0">0</label>
                </span>
                <div>
                    <label for="text" class="form-label mt-5">Describe your Experience:</label>
                    <textarea required type="text" name="review[text]" class="form-control text-area-height"
                        id="description" aria-describedby="descHelp"></textarea>
                    <div id="descHelp" class="form-text">Try to be as open-minded as possible</div>
                    <div class="valid-feedback">
                        Looks good!
                    </div>
                    <div class="invalid-feedback">
                        Please write something.
                    </div>
                </div>
                <button type="submit" class="btn btn-success col-2 align-self-center">List!</button>
                <a class="align-self-center btn btn-danger col-2" href="/campgrounds">Cancel</a>

            </div>
        </div>
    </form>

</div>

<script>
    //for Bootstrap custom Client-Side validation
    (() => {
        'use strict'

        // Fetch all the forms we want to apply custom Bootstrap validation styles to
        const forms = document.querySelectorAll('.needs-validation')

        // Loop over them and prevent submission
        Array.from(forms).forEach(form => {
            form.addEventListener('submit', event => {
                if (!form.checkValidity()) {
                    event.preventDefault()
                    event.stopPropagation()
                }

                form.classList.add('was-validated')
            }, false)
        })
    })();
    // Select all elements with the "i" tag and store them in a NodeList called "stars"
    const stars = document.querySelectorAll(".stars i");
    // Loop through the "stars" NodeList
    stars.forEach((star, index1) => {
        // Add an event listener that runs a function when the "click" event is triggered
        star.addEventListener("click", () => {
            // Loop through the "stars" NodeList Again
            stars.forEach((star, index2) => {
                // Add the "active" class to the clicked star and any stars with a lower index
                // and remove the "active" class from any stars with a higher index
                index1 >= index2 ? star.classList.add("active") : star.classList.remove("active");
            });
            const rating = $(this).data('rating'); // Get the rating from the selected star
            $('#rating').val(rating); // Set the value of the hidden rating form element
        });
    });
</script>